# 実装計画

- [x] 1. ポッドキャスト機能の基盤設定とディレクトリ構造作成
  - src/podcast/ ディレクトリ構造を作成
  - 設定クラス PodcastConfig を app_config.py に追加
  - 発音辞書 YAML ファイルの作成と読み込み機能実装
  - _要件: 8.2, 8.3, 5.4_

- [x] 2. 対話台本生成機能の実装
  - [x] 2.1 DialogueScriptGenerator クラスの基本実装
    - Gemini 2.5 Pro を使用した台本生成クライアント作成
    - 記事全文から対話台本を生成するメソッド実装
    - _要件: 4.2, 3.3_

  - [x] 2.2 対話形式フォーマット機能の実装
    - スピーカータグ（<speaker1>, <speaker2>）付きフォーマット機能
    - 2,400-2,800文字の文字数制御機能
    - 記事重要度による優先順位付け機能
    - _要件: 4.5, 3.3_

  - [x] 2.3 台本生成のテスト実装
    - 文字数制限テスト
    - スピーカータグ形式テスト
    - 記事全文入力のユニットテスト
    - _要件: 4.2, 4.5_

- [x] 3. TTS音声合成機能の実装
  - [x] 3.1 GeminiTTSEngine クラスの基本実装
    - Gemini TTS API クライアント作成
    - スピーカータグ付き台本の音声合成機能
    - _要件: 5.1_

  - [x] 3.2 音声セグメント処理機能の実装
    - スピーカー別セグメント抽出機能
    - 2人の異なる音声での合成機能
    - 音声データの結合処理
    - _要件: 5.1, 5.2_

  - [x] 3.3 TTS機能のテスト実装
    - 音声生成テスト
    - スピーカー切り替えテスト
    - エラーハンドリングテスト
    - _要件: 5.1, 5.2_

- [x] 4. 音声処理とファイル最適化機能の実装
  - [x] 4.1 AudioProcessor クラスの基本実装
    - pydub を使用した音声処理基盤作成
    - 音声アセット（ジングル、BGM）読み込み機能
    - _要件: 2.3, 2.4_

  - [x] 4.2 音声品質調整機能の実装
    - -16 LUFS 音量正規化機能
    - -1 dBFS ピーク制限機能
    - 9.5-10分間の再生時間制御
    - _要件: 1.2, 2.3_

  - [x] 4.3 音声合成とファイル出力機能の実装
    - オープニング・エンディングジングル追加
    - BGM統合機能
    - MP3形式での出力（≤15MB）
    - _要件: 1.3, 2.2, 2.4_

  - [x] 4.4 音声処理のテスト実装
    - 音量正規化テスト
    - ファイルサイズ制限テスト
    - 再生時間制限テスト
    - _要件: 1.2, 1.3, 2.3_

- [x] 5. RSS配信機能の実装
  - [x] 5.1 RSSGenerator クラスの実装
    - feedgen を使用したポッドキャスト RSS 生成機能
    - エピソードメタデータ管理機能
    - _要件: 6.1_

  - [x] 5.2 GitHub Pages 配信機能の実装
    - RSS ファイルの GitHub Pages 公開機能
    - 音声ファイルの静的ホスティング
    - CC-BY クレジット自動挿入機能
    - _要件: 6.2, 2.5_

  - [x] 5.3 RSS配信のテスト実装
    - RSS フィード生成テスト
    - メタデータ正確性テスト
    - クレジット挿入テスト
    - _要件: 6.1, 6.2, 2.5_

- [x] 6. LINE配信機能の実装
  - [x] 6.1 LINEBroadcaster クラスの実装
    - LINE Messaging API クライアント作成
    - ブロードキャストメッセージ送信機能
    - _要件: 6.3_

  - [x] 6.2 LINE配信メッセージ作成機能の実装
    - ポッドキャスト URL 付きメッセージ生成
    - CC-BY クレジット情報の自動挿入
    - _要件: 6.3, 2.5_

  - [x] 6.3 LINE配信のテスト実装
    - API 連携テスト
    - メッセージ形式テスト
    - エラーハンドリングテスト
    - _要件: 6.3_

- [x] 7. マルチチャンネル配信統合機能の実装
  - [x] 7.1 PodcastPublisher クラスの実装
    - RSS と LINE の同時配信機能
    - 配信結果の統合管理
    - _要件: 1.4, 6.5_

  - [x] 7.2 配信エラーハンドリングの実装
    - 配信失敗時の再試行機能
    - 部分的配信成功の処理
    - エラーログ出力機能
    - _要件: 7.3_

  - [x] 7.3 配信統合のテスト実装
    - 同時配信テスト
    - エラーハンドリングテスト
    - 配信結果検証テスト
    - _要件: 1.4, 6.5_

- [x] 8. メイン処理統合とワークフロー実装
  - [x] 8.1 PodcastProcessor クラスの実装
    - 既存 NewsProcessor との統合
    - ポッドキャスト生成パイプライン作成
    - _要件: 8.1_

  - [x] 8.2 GitHub Actions ワークフロー作成
    - 毎日 05:00 JST 実行スケジュール設定
    - 環境変数とシークレット設定
    - _要件: 1.1, 8.4_

  - [x] 8.3 コスト監視機能の実装
    - TTS 使用量追跡機能
    - 月額 $10 制限監視
    - コストアラート機能
    - _要件: 3.1, 7.1_

  - [x] 8.4 統合テストの実装
    - エンドツーエンド処理テスト
    - GitHub Actions 実行テスト
    - コスト制限テスト
    - _要件: 1.1, 3.1, 3.2_

- [x] 9. 音声アセットとクレジット管理の実装
  - [x] 9.1 音声アセット管理機能の実装
    - CC-BY ライセンス音声ファイルの配置
    - アセット読み込み機能
    - _要件: 2.4, 8.3_

  - [x] 9.2 クレジット自動挿入機能の実装
    - RSS フィードへのクレジット挿入
    - LINE メッセージへのクレジット挿入
    - ライセンス情報管理
    - _要件: 2.5_

  - [x] 9.3 アセット管理のテスト実装
    - アセット読み込みテスト
    - クレジット挿入テスト
    - ライセンス準拠テスト
    - _要件: 2.4, 2.5_

- [x] 10. 最終統合とデプロイ準備
  - [x] 10.1 全機能統合テスト
    - 完全なポッドキャスト生成フローテスト
    - 複数記事での動作確認
    - パフォーマンステスト
    - _要件: 全要件_

  - [x] 10.2 設定ドキュメントとREADME更新
    - ポッドキャスト機能の設定手順追加
    - 環境変数設定ガイド更新
    - 使用方法ドキュメント作成
    - _要件: 8.2_

  - [x] 10.3 本番環境デプロイ準備
    - GitHub Secrets 設定確認
    - 初回実行テスト
    - 監視設定確認
    - _要件: 1.1, 3.2, 7.1_