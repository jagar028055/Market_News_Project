# ワークフロー（デイリーレポート連携）

## 日次/時間毎ジョブ（サマリ）
- 1) 取得: ウォッチリストに基づきデータ差分取得（yfinance/取引所API）
- 2) 前処理: 1H→4Hリサンプリング、欠損処理、指標計算
- 3) 解析: ルールYAML評価、シグナル/スコア算出、insights.json生成
- 4) 可視化: PNG（必要に応じHTML）出力、品質チェック
- 5) 選定: デイリーレポ添付候補をランキング（例: スコア上位/イベント発生）
- 6) エクスポート: `build/social/YYYYMMDD/`（SNS用）、`build/note/YYYYMMDD.md` から参照
- 7) ログ/監視: エラー/遅延を記録、再実行トリガ

## デイリーレポートへの差し込み
- noteテンプレ: 章「チャート/図版」に `build/charts/YYYYMMDD/` の上位2枚を差し込み
- SNS画像: パターンDテンプレで1枚生成→手動投稿 or 後続自動化

## バックテスト/最適化の運用
- 毎週 or 月次で定期実行。対象は主要ルール×代表シンボル。
- 成果: `build/backtests/` に保存、ダッシュボード/HTMLで可視化（任意）。

## TradingViewスクショ（個人用途）
- 任意タスクとして低頻度実行。出力は `build/tvshots/` に保存。
- 分析入力には用いない。公開配布はしない。

## スケジューリング
- `APScheduler` で「1D: 17:00 UTC」「1H: 毎時+5分」「スクショ: 1日1〜4回」を目安。
